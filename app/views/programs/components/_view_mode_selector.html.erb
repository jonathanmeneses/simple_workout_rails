<div class="mb-4">
  <label class="block text-sm font-medium text-gray-700 mb-2">View Mode</label>
  <%= form_with url: program_path(@selected_program_id), method: :get, local: true do |form| %>
    <div class="flex gap-2">
      <%= form.radio_button :view_mode, "full_cycle", 
          checked: @view_mode == "full_cycle", 
          class: "sr-only", 
          onchange: "this.form.submit();" %>
      <%= form.label :view_mode_full_cycle, "Full Cycle", 
          class: "px-4 py-2 rounded-lg border #{@view_mode == 'full_cycle' ? 'bg-blue-500 text-white' : 'bg-white text-gray-700'} cursor-pointer" %>
      <%= form.radio_button :view_mode, "single_week", 
          checked: @view_mode == "single_week", 
          class: "sr-only", 
          onchange: "this.form.submit();" %>
      <%= form.label :view_mode_single_week, "Single Week", 
          class: "px-4 py-2 rounded-lg border #{@view_mode == 'single_week' ? 'bg-blue-500 text-white' : 'bg-white text-gray-700'} cursor-pointer" %>
    </div>
    <!-- Week selector - only show if single_week mode -->
    <% if @view_mode == "single_week" && @week_options&.any? %>
      <div class="mt-2">
        <%= form.select :week, options_for_select(@week_options, @selected_day_index), 
            { prompt: "Select Day/Session" }, 
            { class: "border border-gray-300 rounded-lg px-3 py-2", 
              onchange: "this.form.submit();" } %>
      </div>
    <% end %>
    <!-- Preserve other parameters -->
    <%= form.hidden_field :id, value: @selected_program_id %>
    <%= form.hidden_field :cycle, value: @selected_cycle_index %>
  <% end %>
</div>