<%= turbo_stream.replace "program_content" do %>
  <%= render partial: "program_content" %>
<% end %>

<%= turbo_stream.replace "view-mode-tabs" do %>
  <div class="flex gap-2 border-b border-gray-200">
    <button 
      data-action="click->programs#selectViewMode"
      data-programs-target="viewModeTab"
      data-view-mode="description"
      class="px-4 py-2 text-sm font-medium border-b-2 <%= @view_mode == 'description' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700' %>"
    >Description</button>
    <button 
      data-action="click->programs#selectViewMode"
      data-programs-target="viewModeTab"
      data-view-mode="program"
      class="px-4 py-2 text-sm font-medium border-b-2 <%= @view_mode == 'program' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700' %>"
    >Program</button>
    <button 
      data-action="click->programs#selectViewMode"
      data-programs-target="viewModeTab"
      data-view-mode="schedule"
      class="px-4 py-2 text-sm font-medium border-b-2 <%= @view_mode == 'schedule' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700' %>"
    >Schedule</button>
  </div>
<% end %>

<% if @view_mode == 'program' %>
  <%= turbo_stream.replace "cycle-selector" do %>
    <div class="mb-6">
      <label class="block text-sm font-medium text-gray-700 mb-2">Select Cycle:</label>
      <select 
        data-action="change->programs#selectCycle"
        data-programs-target="cycleSelector"
        class="border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
      >
        <% @program.workout_cycles.each do |cycle| %>
          <option value="<%= cycle.name %>" <%= 'selected' if cycle.name == @selected_cycle %>><%= cycle.name %></option>
        <% end %>
      </select>
    </div>
  <% end %>
<% else %>
  <%= turbo_stream.replace "cycle-selector", "" %>
<% end %>